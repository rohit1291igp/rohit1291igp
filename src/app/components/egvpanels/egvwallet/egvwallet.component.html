<div class="main-container">
  <mat-card>
    <div class="row">
      <form [formGroup]="addMoneyForm" (ngSubmit)="addMoneyToWallet(addMoneyForm)">

        <div class='headerUnderLine addMoney col-md-12'>
          Summary
        </div>

        <div class="balance col-md-12 marginB20">
          <div class="col-md-12 marginB20" style="margin-bottom:20px" *ngIf="env.userType == 'egv_admin'">
            <mat-form-field class="addMoneyInput width15">
              <mat-label>Select a client</mat-label>
              <input type="text" matInput placeholder='Select a user' formControlName="selectedUser"
                [matAutocomplete]="auto">
              <mat-autocomplete #auto="matAutocomplete" (optionSelected)='getUserSelected($event.option.value)'
                [displayWith]="userDisplayFn">
                <mat-option *ngFor="let option of filteredUserList | async" [value]="option">
                  {{option.associateName}}</mat-option>
              </mat-autocomplete>
            </mat-form-field>
          </div>
          <div *ngIf="loadingSummary else loaded">
            Select a Client to view Summary.
          </div>


          <ng-template #loaded>
            <div class="col-md-12">

              <div class="col-md-3 col-sm-12 summaryBox">
                <div>&#8377; {{walletSummary.balance}}</div>
                <div class="summaryIcon"> <i class="fa fa-balance-scale "></i> Balance</div>
              </div>

              <div class="col-md-3 col-sm-12 summaryBox">
                <div>&#8377; {{walletSummary.dailyTransLimit || '-'}}</div>
                <div class="summaryIcon"><i class="fa fa-sliders fa-rotate-90"></i> Daily Limit </div>
              </div>

              <div class="col-md-3  col-sm-12 summaryBox">
                <div>&#8377; {{walletSummary.creditLimit || '-'}}</div>
                <div class="summaryIcon"> <i class="fa fa-credit-card "></i> Credit Limit </div>
              </div>
              <div class="col-md-3 col-sm-12 summaryBox">

                <div>{{walletSummary.creditLimitDays || '-'}}</div>
                <div class="summaryIcon"> <i class="fa fa-calendar"></i> Credit Period</div>
              </div>

              <div class="col-md-3 col-sm-12 summaryBox">

                <div>{{walletSummary.active?'Active':'Inactive'}}</div>
                <div class="summaryIcon">
                  <i class="fa fa-check" *ngIf=" walletSummary.active"></i>
                  <i class="fa fa-times" *ngIf=" !walletSummary.active"></i> Status
                </div>
              </div>

            </div>
          </ng-template>
        </div>
        <div class="col-md-12">
          <div class='addMoney headerUnderLine col-md-12'>
            Add Money To Wallet
          </div>
          <div class="col-md-12 marginB20">

            <div>
              <mat-form-field class="addMoneyInput width20 marginB20">
                <mat-label> Enter Amount</mat-label>
                <input matInput name='amount' type="number" placeholder="Enter Amount" formControlName="addMoneyAmount">
              </mat-form-field>

              <mat-form-field class="addMoneyInput width20">
                <mat-label> Enter UTR</mat-label>
                <input matInput name="utr" type="text" placeholder="Enter UTR" formControlName="addMoneyTransactionId">
              </mat-form-field>
              <mat-form-field class="addMoneyInput width20">
                <mat-label> Comments</mat-label>
                <input matInput name="comments" type="text" placeholder="Comments" formControlName="comments">
              </mat-form-field>

              <button mat-flat-button class="addMoneyButton" type="submit">Add Money</button>
            </div>
            <!-- <div class="marginB20">
              
            </div> -->
            <div *ngIf="env.userType=='egv_admin'">
              <div class="width20 addMoney">
                Change Limit
              </div>
              <mat-form-field class="addMoneyInput width20">
                <mat-label>Select Limit Type</mat-label>
                <mat-select formControlName="limitType">
                  <mat-option *ngFor="let option of limitTypeList" [value]="option">{{option.value}}
                  </mat-option>
                </mat-select>
              </mat-form-field>
              <mat-form-field class="addMoneyInput width20">
                <mat-label> Enter New Value</mat-label>
                <input matInput name='limitValue' type="number" placeholder="Enter New Value"
                  formControlName="limitValue">
              </mat-form-field>
              <button mat-flat-button type="button" class="addMoneyButton" (click)="updateLimit()">Update Limit</button>
            </div>


          </div>
        </div>
      </form>
    </div>
  </mat-card>
</div>