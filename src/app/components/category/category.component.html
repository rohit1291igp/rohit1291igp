<div class="container-fluid">
  <div class="row">
      <div class="col-md-12">
          <h3>Categories Content</h3>
      </div>
  </div>
  
  <div class="row">
      <div class="col-md-12">
          <div class="panel panel-default">
              <div class="panel-heading">
                  <h3 class="panel-title">Categories for Blogs Home Page</h3>
              </div>
              <div class="panel-body">
                    
                  <form id="target" #catDataForm="ngForm">
                        <!-- <button type="submit" (click)="addCategory()"  class="btn btn-primary pull-right">Add</button>  -->
                        
                      <div class="row">
                          <div class="col-md-6">
                              <div class="form-group" [ngClass]="{ 'has-error': catDataForm.submitted && !webstore.valid }">
                                    <input class="btn btn-primary pull-right" type="button" (click)="addCategory()" value="Add" /><br/>
                                  <label for="">Webstore</label>
                                  <select class="form-control" name="webstore" #webstore="ngModel" [(ngModel)]="model.webstore" (change)="getCategories()" required>
                                      <option value="">Select Webstore</option>
                                      <option value="5">IGP</option>
                                      <option value="830">Interflora</option>
                                  </select>
                              </div>
                          </div>
                      </div>
                      <div class="row">
                        <div class="col-md-6">
                            <div *ngIf="model.webstore != ''" class="form-group">
                                <!-- <label for="">Categories</label> -->
                                <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                                    <div *ngFor="let cat of categories" class="panel panel-default">
                                      <div class="panel-heading" role="tab" id="headingOne" data-toggle="collapse" data-parent="#accordion" data-target="#collapse">
                                        <h4 class="panel-title" >
                                          <a style="text-decoration: none" role="button" aria-expanded="true" aria-controls="collapse" (click)="handleClick($event)" class="accordion-toggle">
                                              {{cat.title}} <input class="btn btn-primary btn-sm" type="submit" (click)="editCategory(cat,'cat')" value="Edit" /> <input class="btn btn-danger btn-sm" type="submit" (click)="deleteCategory(cat.id)" value="Delete" />
                                          </a>
                                        </h4>
                                      </div>
                                        <div *ngFor="let sc of cat.subcategory" id="collapse" class="panel-collapse collapse in" style="margin-left: 40px;" role="tabpanel" aria-labelledby="headingOne">
                                        <div class="panel-body">
                                            {{sc.title}} <input class="btn btn-primary btn-sm" type="submit" (click)="editCategory(sc,'sc')" value="Edit" /> <input class="btn btn-danger btn-sm" type="submit" (click)="deleteCategory(sc.id)" value="Delete" />
                                        </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                      </div>
                  </form>
              </div>
          </div>
      </div>
  </div>
</div>

<app-category-modal id='sidebar' *ngIf="showSideBar"  [@anim]="testAnimate" [model]="cat" (catClick)="clickDetect($event)"></app-category-modal>